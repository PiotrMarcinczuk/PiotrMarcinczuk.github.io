<!DOCTYPE html>
<html lang="pl">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="styles/sznyc_css.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@1,100&display=swap" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="script.js"></script>
    </head>
    <body>
        <!--naglowek /start-->
        <nav>
            <section id="nav_logo">
                <h1>SznycWiki</h1>
            </section>
            <section id="button_mobile">
                <button type="button"><img src="images/button.png" class="script_button" alt="guzik do rozwinięcia list"></button>
            </section>
            <section id="nav_span">
                <button class="button_1"><a href="index.html">Strona Główna</a></button>
                <hr>
                <button class="button_1"><a href="o_nas.html">Słownik</a></button>
                <hr>
                <button class="button_1"><a href="galeria.html">Galeria</a></button>
                <hr>
                <button class="button_1"><a href="kontakt.html">Kontakt</a></button>
                <hr>
                <button class="button_1"><a href="artykuly.html">Artykuły</a></button>
            </section>
            <!--Rozwijana lista guzik /start-->
            <section id="nav_bar">
                <ul>
                    <li><a href="index.html">Strona Główna</a></li>
                    <li><a href="o_nas.html">Słownik</a></li>
                    <li><a href="galeria.html">Galeria</a></li>
                    <li><a href="kontakt.html">Kontakt</a></li>
                    <li><a href="artykuly.html">Artykuły</a></li>
                </ul>
            </section>
            <!--Rozwijana lista guzik /koniec-->
        </nav>
        <!--naglowek /koniec-->
        <!--Główny kontent sznycsłowa /start-->
        <main>
            <section id="slownik">

            </section>
            <section id="admin">
                <form id="my_form">
                    <label for="word">Podaj słowo: </label>
                    <input type="text" id="word_title">
                    <br>
                    <label for="word">Podaj definicje SznycSłowa: </label>
                    <input type="text" id="word_text">
                    <br>
                    <input type="button" onclick="sznycowanie()" value="sznycccc">
                </form>
            </section>
            <script>
                let word_title = document.querySelector("#word_title");
                let word_text = document.querySelector("#word_text");

                let slownik = document.getElementById("slownik");
                
                let letters = []; //tablica pierwszych liter, które już wystąpiły

                let tab = JSON.parse(localStorage.getItem("slownik") || "[]");
                tab.sort((a, b) => a.title.localeCompare(b.title)); //alfabetyczne sortowanie 
                function sznycowanie(){
                    let title_f = word_title.value; //tytuł naszego słowa
                    let text_f = word_text.value;   //opis naszego słowa
                    if(!tab.some(x => x.title_f === title_f)){ //sprawdzenie czy wpisany tytuł występuje już w tabeli
                        tab.push({title: title_f, text: text_f});
                        localStorage.setItem("slownik", JSON.stringify(tab)); 
                    } 
                }

                for(let i=0; i<tab.length; i++){
                    let temp = tab[i].title;
                    let first = temp.charAt(0).toUpperCase();
                    
                    if (!letters.includes(first)){   //sprawdzenie czy już nie ma takiej wielkiej Litery jako tytulu
                        letters.push(first);
                        let header_div = document.createElement("div");
                        header_div.textContent = first;
                        slownik.appendChild(header_div); //dodanie do sekcji słownik elementu zawierającego wielka litere
                        header_div.style.margin = "20px 0 0 0";
                    }

                    let area = document.createElement("p"); // towrzenie obszaru ze słowem i jego wyjaśnieniem
                    area.textContent = tab[i].title + " - " + tab[i].text;
                    slownik.appendChild(area);
                }

                function removeWord(title) {   //funkcja pomocnicza do usuwania słów
                    tab = tab.filter(word => word.title !== title);
                    localStorage.setItem("slownik", JSON.stringify(tab));
                }
           </script>
        </main>
        <!--Główny kontent sznycsłowa /koniec-->
    </body>
</html>